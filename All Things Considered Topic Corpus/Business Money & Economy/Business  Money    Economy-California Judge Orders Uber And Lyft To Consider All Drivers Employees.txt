 Uber and Lyft have been fighting California and its biggest cities over whether the thousands of ride-hailing drivers on the state's streets are company employees meaning entitled to benefits or independent contractors. Well today the ride-hailing giants lost in court. A state judge has ordered them to consider all those drivers employees which could cost the companies millions of dollars. NPR tech reporter Bobby Allyn is with us now from San Francisco. Bobby how you doing?  Hey Mary Louise - doing OK.  So what are the stakes here?  Well in some ways the stakes are the very business model Uber and Lyft are built on which you know of course relies very heavily on drivers being independent contractors. And you know this ruling is a big deal because here we have a state judge saying Uber and Lyft are violating the law because there are hundreds of thousands of drivers who are you know independent contractors that the companies are refusing to convert them to regular employees. And you know it comes after California passed a law last year that made it much more difficult for companies like Lyft and Uber to hire people as independent contractors. And here we have the judge saying Lyft and Uber are showing quote a prolonged and brazen refusal to comply with that California law.  What did the judge say in explaining what the rationale for this ruling was?  Yeah. The judge said that you know Uber and Lyft are exhibiting quote circular reasoning. And what the judge meant by that is you know Uber and Lyft consider its engineers and other tech workers as full-time employees but the hundreds of thousands of drivers are treated a little differently. And even though the companies you know have long made the case that this new state law regulating the gig economy should not apply to them the judge says the companies can no longer postpone their day of reckoning.  Let me go out on a limb and guess that Uber and Lyft are planning to appeal this.  Yes they sure are. Uber says it will appeal quote on behalf of California drivers. Just this morning in The New York Times the CEO of Uber wrote an op-ed you know and he said Uber would only have full-time jobs for a small fraction of its current drivers and would have to shrink its service dramatically if they converted all of their drivers to full-time employees. And you know Uber and Lyft are not profitable companies. They point this out. And they also say if all of their drivers were full-time employees they would have to lay many of them off. And for passengers rides would get more expensive. That is what the companies say.  Yeah. So what is the timing here? Does this kick in immediately or what happens next?  So the judge is giving Uber and Lyft 10 days to appeal which as you mentioned they plan to. And this case is going to trial and so this ruling will last until the trial and through the trial. I will say the judge noted that the state of California the attorney general and the city attorneys who are suing the companies here are likely to prevail on the merits. So the judge is basically signaling that when it comes time for the trial that California has a really strong case. In November voters in California will be you know testing this idea out about whether or not Lyft and Uber drivers should be contractors or full-time employees. There is a ballot initiative that is going to be asking voters that that both Lyft and Uber have been pushing for. So we will see what California voters think about that come November.  Bobby Allyn thanks so much.  Thank you Mary Louise.  That is NPR's Bobby Allyn reporting on this latest ruling against Uber and Lyft in California.  